{% extends 'base.html.twig' %}

{% block title %}Home{% endblock %}
{% block meta_description %}Accueil{% endblock %}

{% block body %}
    <div class="container">
        <h1>Bienvenue dans notre gestionnaire de sessions de formations</h1><br>
        
        <!-- SESSIONS EN COURS -->
        <h2>Sessions en cours</h2><br>

            <table class="table table-striped table-danger">
                <thead>
                    <tr class="table-active">
                        <th scope="col">Statut</th>
                        <th scope="col">Session</th>
                        <th scope="col">Formation</th>
                        <th scope="col">Date de début</th>
                        <th scope="col">Date de fin</th>
                        <th scope="col">Inscrits</th>
                        <th scope="col">Dispo</th>
                        {% if is_granted('ROLE_ADMIN') %}
                            <th scope="col">Actions</th>
                        {% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for session in sessionsEnCours %}
                    <tr>
                        <td>{% if session.nbInscrits == session.nbPlaces %}
                            <p class="complet">Complet</p>
                        {% else %}
                            <p class="ouvert">Ouvert</p>
                        {% endif %}</td>
                        <td><a href="{{path('show_session', {'id' : session.id})}}">{{session.titre}}</a></td>
                        <td><a href="{{path('show_formation', {'id' : session.formation.id})}}">{{session.formation}}</a></td>
                        <td>{{session.dateDebutFr}}</td>
                        <td>{{session.dateFinFr}}</td>
                        <td>{{ session.nbInscrits }} / {{ session.nbPlaces }}</td>
                        <td>{{ session.nbRestants }}</td>
                        {% if is_granted('ROLE_ADMIN') %}
                            <td><a href="{{path('edit_session', {'id' : session.id})}}"><img src="img/crayon.png" alt="crayon" width="20"></a></td>
                            <!--<a href="https://www.flaticon.com/fr/icones-gratuites/crayon" title="crayon icônes">Crayon icônes créées par Freepik - Flaticon</a>-->
                        {% endif %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

        <!-- SESSION A VENIR-->
        <h3>Sessions à venir</h3><br>

            <table class="table table-striped table-info">
                <thead>
                    <tr class="table-active">
                        <th scope="col">Statut</th>
                        <th scope="col">Session</th>
                        <th scope="col">Formation</th>
                        <th scope="col">Date de début</th>
                        <th scope="col">Date de fin</th>
                        <th scope="col">Inscrits</th>
                        <th scope="col">Dispo</th>
                        {% if is_granted('ROLE_ADMIN') %}
                            <th scope="col">Actions</th>
                        {% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for session in sessionsAVenir %}
                    <tr>
                        <td>{% if session.nbInscrits == session.nbPlaces %}
                            <p class="complet">Complet</p>
                        {% else %}
                            <p class="ouvert">Ouvert</p>
                        {% endif %}</td>
                        <td><a href="{{path('show_session', {'id' : session.id})}}">{{session.titre}}</a></td>
                        <td><a href="{{path('show_formation', {'id' : session.formation.id})}}">{{session.formation}}</a></td>
                        <td>{{session.dateDebutFr}}</td>
                        <td>{{session.dateFinFr}}</td>
                        <td>{{ session.nbInscrits }} / {{ session.nbPlaces }}</td>
                        <td>{{ session.nbRestants }}</td>
                        {% if is_granted('ROLE_ADMIN') %}
                            <td><a href="{{path('edit_session', {'id' : session.id})}}"><img src="img/crayon.png" alt="crayon" width="20"></a></td>
                            <!--<a href="https://www.flaticon.com/fr/icones-gratuites/crayon" title="crayon icônes">Crayon icônes créées par Freepik - Flaticon</a>-->
                        {% endif %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

        <!-- SESSIONS PASSEES-->
        <h4>Sessions passées</h4><br>
{# {{ dump(sessionsPassees) }} #}

        <table class="table table-striped table-warning">
            <thead>
                <tr class="table-active">
                    <th scope="col">Statut</th>
                    <th scope="col">Session</th>
                    <th scope="col">Formation</th>
                    <th scope="col">Date de début</th>
                    <th scope="col">Date de fin</th>
                    <th scope="col">Inscrits</th>
                    <th scope="col">Dispo</th>
                    {% if is_granted('ROLE_ADMIN') %}
                            <th scope="col">Actions</th>
                        {% endif %}
                </tr>
            </thead>
            <tbody>
                {% for session in sessionsPassees %}
                <tr>
                    <td>{% if session.nbInscrits == session.nbPlaces %}
                        <p class="complet">Complet</p>
                    {% else %}
                        <p class="ouvert">Ouvert</p>
                    {% endif %}
                    </td>
                    <td><a href="{{path('show_session', {'id' : session.id})}}">{{session.titre}}</a></td>
                    <td><a href="{{path('show_formation', {'id' : session.formation.id})}}">{{session.formation}}</a></td>
                    <td>{{session.dateDebutFr}}</td>
                    <td>{{session.dateFinFr}}</td>
                    <td>{{ session.nbInscrits }} / {{ session.nbPlaces }}</td>
                    <td>{{ session.nbRestants }}</td>
                    {% if is_granted('ROLE_ADMIN') %}
                            <td><a href="{{path('edit_session', {'id' : session.id})}}"><img src="img/crayon.png" alt="crayon" width="20"></a></td>
                            <!--<a href="https://www.flaticon.com/fr/icones-gratuites/crayon" title="crayon icônes">Crayon icônes créées par Freepik - Flaticon</a>-->
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
        
    </div>
{% endblock %}
