{% extends 'base.html.twig' %}

{% block title %}Détail d'une session{% endblock %}

{% block body %}

    <div class="container">
        <button class="retour"><a href="{{path('app_session')}}">Retour aux sessions</a></button>
    
        {% if is_granted('ROLE_ADMIN') %}
            <button><a href="{{path('edit_session', {'id' : session.id})}}">Editer</a></button>
            <button><a href="{{path('delete_session', {'id' : session.id})}}">Supprimer</a></button>
        {% endif %}
    
        <h1>Session : {{session.titre}} du {{session.dateDebutFr}}</h1><br>
        
        <table class="table table-striped table-danger">
            <thead>
                <tr>
                    <th>Formateur référent</th>
                    <th>Formation</th>
                    <th>Date de début</th>
                    <th>Date de fin</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><a href="">{{session.formateur}}</a></td>
                    <td>{{session.formation}}</td>
                    <td>{{session.dateDebutFr}}</td>
                    <td>{{session.dateFinFr}}</td>
                </tr>
            </tbody>
        </table>

        <h5>Programme :</h5><br>

            <table class="table table-striped table-info">
                <thead>
                    <tr>
                        <th>Nom du module</th>
                        <th>Nombre de jours</th>
                        <th>Supprimer</th>
                    </tr>
                </thead>
                <tbody>
                    {% for programmes in session.programmes %}
                    <tr>
                        <td>{{programmes.module}}</td>
                        <td>{{programmes.duree}} jours</td>
                        <td>X</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
    
            <p>ICI afficher les modules non programmés (par catégorie?) avec possibilité de les rajouter au programme</p>

        <h3>Stagiaires inscrits </h3>
    
        <table class="table table-striped table-warning">
            <thead>
                <tr>
                    <th>Prenom Nom</th>
                    {% if is_granted('ROLE_ADMIN') %}
                        <th>Supprimer de la session</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody>
                {% for stagiaires in session.stagiaires %}
                <tr>
                    <td><a href="{{path('show_stagiaire', {'id' : stagiaires.id})}}"> • {{stagiaires}}</a></td>
                    {% if is_granted('ROLE_ADMIN') %}
                        <td><a href="{{path('remove_stagiaire',{'id' : stagiaires.id, 'session' : session.id})}}">X</a></td>
                    {% endif %}
                </tr>
                {% endfor %}<br>
            </tbody>
        </table>
    
        <h4>Stagiaires non inscrits </h4><br>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Prenom Nom</th>
                    {% if is_granted('ROLE_ADMIN') %}
                        <th>Ajouter à la session</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody>
                {% for stagiaire in nonInscrits %}
                <tr>
                    <td> <a href="{{path('show_stagiaire', {'id' : stagiaire.id})}}"> • {{stagiaire}}</a></td>
                    {% if is_granted('ROLE_ADMIN') %}
                    {# <td><a href="">+</a></td> #}
                        <td><a href="{{path('add_stagiaire',{'id' : stagiaire.id, 'session' : session.id})}}">+</a></td>
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
            
    </div>
{% endblock %}